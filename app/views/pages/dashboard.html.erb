<div class="show-container">

  <h1>Dashboard</h1>

    <div class="tab-container-bts">

    <ul class="nav justify-content-between" id="DashboardTab" role="tablist">
      <li class="nav-item tab">
        <a class="nav-link tab active" id="my-projects-tab" data-toggle="tab" href="#my-projects" role="tab" aria-controls="my-projects" aria-selected="true"><h2>My projects</h2></a>
      </li>

      <li class="nav-item tab">
        <a class="nav-link tab" id="requests-tab" data-toggle="tab" href="#requests" role="tab" aria-controls="requests" aria-selected="false"><h2>Requests</h2></a>
      </li>

      <li class="nav-item tab">
        <a class="nav-link tab" id="my-collabs-tab" data-toggle="tab" href="#my-collabs" role="tab" aria-controls="my-collabs" aria-selected="false"><h2>My collaborations</h2></a>
      </li>
    </ul>

    <hr>

  </div>

    <!-- TAB CONTENTS -->
    <div class="tab-content" id="DashboardTabContent">
    </div>

    <!-- MY PROJECTS -->
    <div class="tab-pane show active fade dashboard-list" id="my-projects" role="tabpanel" aria-labelledby="my-projects-tab">
      <% @projects.each do |project| %>
        <br>
        <h6><%= link_to "#{project.title}", project_path(project) %></h6>
      <% end %>
    </div>

    <!-- REQUESTS -->
    <div class="tab-pane fade dashboard-list" id="requests" role="tabpanel" aria-labelledby="requests-tab">
      <% @pending_collabs.each do |collaboration| %>
        <div class="dashboard-pair">
          <div class="dashboard-item">
            <h6><%= collaboration.user.username %> wants to collaborate as <%= collaboration.role  %> on <%= link_to "#{collaboration.project.title}", project_path(collaboration.project) %></h6>
            Message: <%= collaboration.message %>
          </div>
          <div class="dashboard-request float-right">
            <%= button_to  "Confirm", confirm_path(collaboration), method: :patch, data: { confirm: "Are you sure?" }  %>
            <!--THE DENIED CONFIRMATION GETS DELETED ( FOR THE FUTURE, WE SHOULD KEEP IT BUT AS STATUS = DENIED )-->
            <%= button_to  "  Deny  ", confirm_path(collaboration), method: :patch, data: { confirm: "Are you sure?" } %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- MY COLLABS -->
    <div class="tab-pane fade dashboard-list" id="my-collabs" role="tabpanel" aria-labelledby="my-collabs-tab">
      <% @collaborations.each do |collaboration| %>
        <div class="dashboard-pair">
          <div class="dashboard-item">
            <h6><%= collaboration.role %> on
            <%= link_to "#{collaboration.project.title}", project_path(collaboration.project) %></h6>
          </div>
          <div class="dashboard-request float-right">
            <%= button_to "Edit", edit_project_collaboration_path(collaboration.project, collaboration) %>
            <%= button_to "Cancel request", project_collaboration_path(collaboration.project, collaboration), method: :delete, data: { confirm: "Delete request? Are you sure?" } %>
          </div>
        </div>
      <% end %>
    </div>

</div>

